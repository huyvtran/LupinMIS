{"ast":null,"code":"var _jsxFileName = \"/home/rushi/react_app/lupinadmin/LupinMIS/webApp/admin/src/coreAdmin/masterData/sectorAndActivity/component/subActivity/SubActivity.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport axios from 'axios';\nimport swal from 'sweetalert';\nimport _ from 'underscore';\nimport { Route, withRouter } from 'react-router-dom';\nimport IAssureTable from \"../../../../IAssureTable/IAssureTable.jsx\";\nimport \"./SubActivity.css\";\naxios.defaults.baseURL = 'http://qalmisapi.iassureit.com';\naxios.defaults.headers.post['Content-Type'] = 'application/json';\n\nclass SubActivity extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      \"sector\": \"\",\n      \"activityName\": \"\",\n      \"subActivityName\": \"\",\n      \"unit\": \"\",\n      \"familyUpgradation\": \"No\",\n      \"user_ID\": \"\",\n      \"shown\": true,\n      fields: {},\n      errors: {},\n      \"tableHeading\": {\n        sector: \"Name of Sector\",\n        activityName: \"Name of Activity\",\n        subActivityName: \"Name of Sub-Activity\",\n        unit: \"Unit\",\n        familyUpgradation: \"Family Upgradation\",\n        actions: 'Action'\n      },\n      \"tableObjects\": {\n        deleteMethod: 'patch',\n        apiLink: '/api/sectors/subactivity/delete/',\n        paginationApply: true,\n        searchApply: true,\n        editUrl: '/sector-and-activity/'\n      },\n      \"startRange\": 0,\n      \"limitRange\": 10,\n      \"editId\": props.match.params ? props.match.params.subactivityId : '',\n      \"editSectorId\": props.match.params ? props.match.params.sectorId : ''\n    };\n  }\n\n  handleChange(event) {\n    event.preventDefault();\n    this.setState({\n      \"sector\": this.refs.sector.value,\n      \"activityName\": this.refs.activityName.value,\n      \"subActivityName\": this.refs.subActivityName.value,\n      \"unit\": this.refs.unit.value\n    });\n    let fields = this.state.fields;\n    fields[event.target.name] = event.target.value;\n    this.setState({\n      fields\n    });\n\n    if (this.validateForm()) {\n      let errors = {};\n      errors[event.target.name] = \"\";\n      this.setState({\n        errors: errors\n      });\n    }\n  }\n\n  isTextKey(evt) {\n    var charCode = evt.which ? evt.which : evt.keyCode;\n\n    if (charCode != 189 && charCode > 32 && (charCode < 65 || charCode > 90)) {\n      evt.preventDefault();\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  isNumberKey(evt) {\n    var charCode = evt.which ? evt.which : evt.keyCode;\n\n    if (charCode > 31 && (charCode < 48 || charCode > 57) && (charCode < 96 || charCode > 105)) {\n      evt.preventDefault();\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  submitSubActivity(event) {\n    event.preventDefault();\n\n    if (this.validateFormReq() && this.validateForm()) {\n      var subActivityValues = {\n        \"sector_ID\": this.refs.sector.value.split('|')[1],\n        \"sector\": this.refs.sector.value.split('|')[0],\n        \"activity_ID\": this.refs.activityName.value.split('|')[1],\n        \"activityName\": this.refs.activityName.value.split('|')[0],\n        \"subActivityName\": this.refs.subActivityName.value,\n        \"unit\": this.state.unit,\n        \"familyUpgradation\": this.state.familyUpgradation,\n        \"user_ID\": this.state.user_ID\n      };\n      let fields = {};\n      fields[\"sector\"] = \"\";\n      fields[\"activityName\"] = \"\";\n      fields[\"subActivityName\"] = \"\";\n      fields[\"unit\"] = \"\";\n      this.setState({\n        \"sector\": \"\",\n        \"activityName\": \"\",\n        \"subActivityName\": \"\",\n        \"unit\": \"\",\n        \"availableActivity\": [],\n        fields: fields\n      });\n      axios.patch('/api/sectors/subactivity', subActivityValues).then(response => {\n        this.getData(this.state.startRange, this.state.limitRange);\n        swal({\n          title: response.data.message,\n          text: response.data.message\n        });\n      }).catch(function (error) {\n        console.log(\"error = \", error);\n      });\n    }\n  }\n\n  updateSubActivity(event) {\n    event.preventDefault();\n\n    if (this.refs.sector.value == \"\" || this.refs.activityName.value == \"\" || this.refs.subActivityName.value == \"\" || this.state.unit == \"\") {\n      if (this.validateFormReq() && this.validateForm()) {}\n    } else {\n      var subActivityValues = {\n        \"sector_ID\": this.refs.sector.value.split('|')[1],\n        \"sector\": this.refs.sector.value.split('|')[0],\n        \"activity_ID\": this.refs.activityName.value.split('|')[1],\n        \"activityName\": this.refs.activityName.value.split('|')[0],\n        \"subactivity_ID\": this.state.editId,\n        \"subActivityName\": this.refs.subActivityName.value.split('|')[0],\n        \"unit\": this.state.unit,\n        \"familyUpgradation\": this.state.familyUpgradation,\n        \"user_ID\": this.state.user_ID\n      };\n      let fields = {};\n      fields[\"sector\"] = \"\";\n      fields[\"activityName\"] = \"\";\n      fields[\"subActivityName\"] = \"\";\n      fields[\"unit\"] = \"\";\n      this.setState({\n        \"sector\": \"\",\n        \"activityName\": \"\",\n        \"subActivityName\": \"\",\n        \"unit\": \"\",\n        \"availableActivity\": [],\n        fields: fields\n      });\n      axios.patch('/api/sectors/subactivity/update', subActivityValues).then(response => {\n        this.getData(this.state.startRange, this.state.limitRange);\n        swal({\n          title: response.data.message,\n          text: response.data.message\n        });\n        this.setState({\n          editId: ''\n        });\n        this.props.history.push('/sector-and-activity');\n      }).catch(function (error) {\n        console.log(\"error = \", error);\n      });\n    }\n  }\n\n  validateFormReq() {\n    let fields = this.state.fields;\n    let errors = {};\n    let formIsValid = true;\n    $(\"html,body\").scrollTop(0);\n\n    if (!fields[\"sector\"]) {\n      formIsValid = false;\n      errors[\"sector\"] = \"This field is required.\";\n    }\n\n    if (!fields[\"activityName\"]) {\n      formIsValid = false;\n      errors[\"activityName\"] = \"This field is required.\";\n    }\n\n    if (!fields[\"subActivityName\"]) {\n      formIsValid = false;\n      errors[\"subActivityName\"] = \"This field is required.\";\n    }\n\n    if (!fields[\"unit\"]) {\n      formIsValid = false;\n      errors[\"unit\"] = \"This field is required.\";\n    }\n\n    this.setState({\n      errors: errors\n    });\n    return formIsValid;\n  }\n\n  validateForm() {\n    let fields = this.state.fields;\n    let errors = {};\n    let formIsValid = true;\n    $(\"html,body\").scrollTop(0);\n\n    if (typeof fields[\"unit\"] !== \"undefined\") {\n      // if (!fields[\"beneficiaryID\"].match(/^(?!\\s*$)[-a-zA-Z0-9_:,.' ']{1,100}$/)) {\n      if (!fields[\"unit\"].match(/^[_A-z]*((-|\\s)*[_A-z])*$|^$/)) {\n        formIsValid = false;\n        errors[\"unit\"] = \"Please enter valid Center Name.\";\n      }\n    }\n\n    if (typeof fields[\"subActivityName\"] !== \"undefined\") {\n      // if (!fields[\"beneficiaryID\"].match(/^(?!\\s*$)[-a-zA-Z0-9_:,.' ']{1,100}$/)) {\n      if (!fields[\"subActivityName\"].match(/^[_A-z]*((-|\\s)*[_A-z])*$|^$/)) {\n        formIsValid = false;\n        errors[\"subActivityName\"] = \"Please enter valid Center Name.\";\n      }\n    }\n\n    this.setState({\n      errors: errors\n    });\n    return formIsValid;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.getAvailableSectors();\n    var editId = nextProps.match.params.subactivityId;\n\n    if (nextProps.match.params.subactivityId) {\n      this.setState({\n        editId: editId,\n        editSectorId: nextProps.match.params.sectorId\n      }, () => {\n        this.getAvailableActivity(this.state.editSectorId);\n        this.edit(this.state.editSectorId);\n      });\n    }\n\n    if (nextProps) {\n      this.getLength();\n    }\n  }\n\n  componentDidMount() {\n    this.getAvailableSectors();\n\n    if (this.state.editId) {\n      this.getAvailableActivity(this.state.editSectorId);\n      this.edit(this.state.editId);\n    }\n\n    this.getLength();\n    this.getData(this.state.startRange, this.state.limitRange);\n  }\n\n  getAvailableSectors() {\n    axios({\n      method: 'get',\n      url: '/api/sectors/list'\n    }).then(response => {\n      this.setState({\n        availableSectors: response.data\n      });\n    }).catch(function (error) {\n      console.log('error', error);\n    });\n  }\n\n  selectSector(event) {\n    event.preventDefault();\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n    var sector_id = event.target.value.split('|')[1];\n    this.handleChange(event);\n    this.getAvailableActivity(sector_id);\n  }\n\n  getAvailableActivity(sector_id) {\n    axios({\n      method: 'get',\n      url: '/api/sectors/' + sector_id\n    }).then(response => {\n      this.setState({\n        availableActivity: response.data[0].activity\n      }, () => {});\n    }).catch(function (error) {\n      console.log('error', error);\n    });\n  }\n\n  edit(id) {\n    var activity_id = this.props.match.params.activityId;\n    var subactivity_id = this.props.match.params.subactivityId;\n    axios({\n      method: 'get',\n      url: '/api/sectors/' + id\n    }).then(response => {\n      var editData = response.data[0];\n      this.setState({\n        \"sector\": editData.sector + '|' + editData._id,\n        \"activityName\": editData.activity.filter(a => {\n          return a._id == activity_id ? a.activityName : '';\n        })[0].activityName + '|' + activity_id,\n        \"subActivityName\": _.flatten(editData.activity.map(a => {\n          if (a._id == activity_id) return a.subActivity.filter(b => {\n            if (b._id == subactivity_id) return b.subActivityName;\n          });\n        }))[0].subActivityName,\n        \"unit\": _.flatten(editData.activity.map((a, i) => {\n          if (a._id == activity_id) return a.subActivity.filter(b => {\n            if (b._id == subactivity_id) return b.unit;\n          });\n        }))[0].unit,\n        \"familyUpgradation\": _.flatten(editData.activity.map((a, i) => {\n          if (a._id == activity_id) return a.subActivity.filter(b => {\n            if (b._id == subactivity_id) return b.familyUpgradation;\n          });\n        }))[0].familyUpgradation\n      }, () => {});\n    }).catch(function (error) {});\n  }\n\n  getLength() {\n    axios.get('/api/sectors/count').then(response => {\n      // console.log('response', response.data);\n      this.setState({\n        dataCount: response.data.dataLength\n      }, () => {\n        console.log('dataCount', this.state.dataCount);\n      });\n    }).catch(function (error) {});\n  }\n\n  getData(startRange, limitRange) {\n    var data = {\n      startRange: startRange,\n      limitRange: limitRange\n    };\n    axios.post('/api/sectors/subactivity/list', data).then(response => {\n      this.setState({\n        tableData: response.data\n      });\n    }).catch(function (error) {\n      console.log(\"error = \", error);\n    });\n  }\n\n  getSearchText(searchText, startRange, limitRange) {\n    this.setState({\n      tableData: []\n    });\n  }\n\n  getToggleValue(event) {\n    if (this.state.familyUpgradation === \"No\") {\n      this.setState({\n        familyUpgradation: \"Yes\"\n      });\n    } else if (this.state.familyUpgradation === \"Yes\") {\n      this.setState({\n        familyUpgradation: \"No\"\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    this.setState({\n      \"sector\": \"\",\n      \"activityName\": \"\",\n      \"subActivityName\": \"\",\n      \"unit\": 0,\n      \"familyUpgradation\": \"No\",\n      \"editId\": \"\"\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"formWrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 formLable mt\",\n      id: \"subActivityb\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-6 col-md-6 col-sm-12 col-xs-12 addLoc \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"perinfotitle mgtpprsnalinfo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-map-marker\",\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375\n      },\n      __self: this\n    }), \"\\xA0\\xA0\\xA0Add Sub-Activity\")), React.createElement(\"div\", {\n      className: \"marginBottom col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \" col-lg-12 col-sm-12 col-xs-12 formLable valid_box \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \" col-lg-4 col-md-4 col-sm-6 col-xs-12 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"formLable\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381\n      },\n      __self: this\n    }, \"Select Sector Name\"), React.createElement(\"span\", {\n      className: \"asterix\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381\n      },\n      __self: this\n    }, \"*\"), React.createElement(\"div\", {\n      className: \"col-lg-12 col-sm-12 col-xs-12 input-group inputBox-main\",\n      id: \"sector\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      className: \"custom-select form-control inputBox\",\n      ref: \"sector\",\n      name: \"sector\",\n      value: this.state.sector,\n      disabled: this.state.editId ? true : false,\n      onChange: this.selectSector.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      className: \"hidden\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384\n      },\n      __self: this\n    }, \"--Select Sector--\"), this.state.availableSectors && this.state.availableSectors.length > 0 ? this.state.availableSectors.map((data, index) => {\n      return React.createElement(\"option\", {\n        key: data._id,\n        value: data.sector + '|' + data._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389\n        },\n        __self: this\n      }, data.sector);\n    }) : null)), React.createElement(\"div\", {\n      className: \"errorMsg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397\n      },\n      __self: this\n    }, this.state.errors.sector)), React.createElement(\"div\", {\n      className: \" col-lg-4 col-md-4 col-sm-6 col-xs-12 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"formLable\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400\n      },\n      __self: this\n    }, \"Select Activity Name\"), React.createElement(\"span\", {\n      className: \"asterix\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400\n      },\n      __self: this\n    }, \"*\"), React.createElement(\"div\", {\n      className: \"col-lg-12 col-sm-12 col-xs-12 input-group inputBox-main\",\n      id: \"activityName\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      className: \"custom-select form-control inputBox\",\n      ref: \"activityName\",\n      name: \"activityName\",\n      value: this.state.activityName,\n      disabled: this.state.editId ? true : false,\n      onChange: this.handleChange.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      className: \"hidden\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403\n      },\n      __self: this\n    }, \"-- Select Activity--\"), this.state.availableActivity && this.state.availableActivity.length > 0 ? this.state.availableActivity.map((data, index) => {\n      if (data.activityName) {\n        return React.createElement(\"option\", {\n          key: data._id,\n          value: data.activityName + '|' + data._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 409\n          },\n          __self: this\n        }, data.activityName);\n      }\n    }) : null)), React.createElement(\"div\", {\n      className: \"errorMsg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 418\n      },\n      __self: this\n    }, this.state.errors.activityName)), React.createElement(\"div\", {\n      className: \" col-md-4 col-sm-6 col-xs-12 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 421\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"formLable\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 422\n      },\n      __self: this\n    }, \"Name of Sub-Activity\"), React.createElement(\"span\", {\n      className: \"asterix\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 422\n      },\n      __self: this\n    }, \"*\"), React.createElement(\"div\", {\n      className: \"col-lg-12 col-sm-12 col-xs-12 input-group inputBox-main \",\n      id: \"subActivityName\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 423\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control inputBox \",\n      ref: \"subActivityName\",\n      name: \"subActivityName\",\n      value: this.state.subActivityName,\n      onKeyDown: this.isTextKey.bind(this),\n      onChange: this.handleChange.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 427\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"errorMsg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 429\n      },\n      __self: this\n    }, this.state.errors.subActivityName)), React.createElement(\"div\", {\n      className: \" col-md-12 col-sm-6 col-xs-12 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 431\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \" col-lg-12 col-sm-12 col-xs-12 formLable valid_box \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 435\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \" col-md-4 col-sm-6 col-xs-12 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 436\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"formLable\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 437\n      },\n      __self: this\n    }, \"Unit\"), React.createElement(\"span\", {\n      className: \"asterix\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 437\n      },\n      __self: this\n    }, \"*\"), React.createElement(\"div\", {\n      className: \"col-lg-12 col-sm-12 col-xs-12 input-group inputBox-main \",\n      id: \"unit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 438\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control inputBox \",\n      ref: \"unit\",\n      name: \"unit\",\n      value: this.state.unit,\n      onKeyDown: this.isTextKey.bind(this),\n      onChange: this.handleChange.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 439\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"errorMsg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 441\n      },\n      __self: this\n    }, this.state.errors.unit)), React.createElement(\"div\", {\n      className: \" col-lg-4 col-md-4 col-sm-6 col-xs-12 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 443\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"formLable\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 444\n      },\n      __self: this\n    }, \"Family Upgradation\"), React.createElement(\"span\", {\n      className: \"asterix\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 444\n      },\n      __self: this\n    }, \"*\"), React.createElement(\"div\", {\n      className: \"can-toggle genderbtn demo-rebrand-2 \",\n      onChange: this.getToggleValue.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 445\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      id: \"d\",\n      type: \"checkbox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 446\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"formLable\",\n      htmlFor: \"d\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 447\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"can-toggle__switch\",\n      \"data-checked\": \"Yes\",\n      \"data-unchecked\": \"No\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 448\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"can-toggle__label-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 449\n      },\n      __self: this\n    })))))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 454\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 455\n      },\n      __self: this\n    }, this.state.editId ? React.createElement(\"button\", {\n      className: \" col-lg-2 btn submit pull-right\",\n      onClick: this.updateSubActivity.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 458\n      },\n      __self: this\n    }, \" Update \") : React.createElement(\"button\", {\n      className: \" col-lg-2 btn submit pull-right\",\n      onClick: this.submitSubActivity.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 460\n      },\n      __self: this\n    }, \" Submit \"))), React.createElement(\"div\", {\n      className: \"col-lg-12 mt\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 464\n      },\n      __self: this\n    }, React.createElement(\"hr\", {\n      className: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 465\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 mt\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 467\n      },\n      __self: this\n    }, React.createElement(IAssureTable, {\n      tableHeading: this.state.tableHeading,\n      twoLevelHeader: this.state.twoLevelHeader,\n      dataCount: this.state.dataCount,\n      tableData: this.state.tableData,\n      getData: this.getData.bind(this),\n      tableObjects: this.state.tableObjects,\n      getSearchText: this.getSearchText.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 468\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default withRouter(SubActivity);","map":{"version":3,"sources":["/home/rushi/react_app/lupinadmin/LupinMIS/webApp/admin/src/coreAdmin/masterData/sectorAndActivity/component/subActivity/SubActivity.js"],"names":["React","Component","$","axios","swal","_","Route","withRouter","IAssureTable","defaults","baseURL","headers","post","SubActivity","constructor","props","state","fields","errors","sector","activityName","subActivityName","unit","familyUpgradation","actions","deleteMethod","apiLink","paginationApply","searchApply","editUrl","match","params","subactivityId","sectorId","handleChange","event","preventDefault","setState","refs","value","target","name","validateForm","isTextKey","evt","charCode","which","keyCode","isNumberKey","submitSubActivity","validateFormReq","subActivityValues","split","user_ID","patch","then","response","getData","startRange","limitRange","title","data","message","text","catch","error","console","log","updateSubActivity","editId","history","push","formIsValid","scrollTop","componentWillReceiveProps","nextProps","getAvailableSectors","editSectorId","getAvailableActivity","edit","getLength","componentDidMount","method","url","availableSectors","selectSector","sector_id","availableActivity","activity","id","activity_id","activityId","subactivity_id","editData","_id","filter","a","flatten","map","subActivity","b","i","get","dataCount","dataLength","tableData","getSearchText","searchText","getToggleValue","componentWillUnmount","render","bind","length","index","tableHeading","twoLevelHeader","tableObjects"],"mappings":"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","sourcesContent":["import React, { Component }   from 'react';\nimport $                      from 'jquery';\nimport axios                  from 'axios';\nimport swal                   from 'sweetalert';\nimport _                      from 'underscore';\nimport {Route, withRouter}    from 'react-router-dom';\nimport IAssureTable           from \"../../../../IAssureTable/IAssureTable.jsx\";\nimport \"./SubActivity.css\";\n\naxios.defaults.baseURL = 'http://qalmisapi.iassureit.com';\naxios.defaults.headers.post['Content-Type'] = 'application/json';\n\nclass SubActivity extends Component{\n  \n  constructor(props){\n    super(props);\n   \n    this.state = {\n      \"sector\"              :\"\",\n      \"activityName\"        :\"\",\n      \"subActivityName\"     :\"\",\n      \"unit\"                :\"\",\n      \"familyUpgradation\"   :\"No\",\n      \"user_ID\"             :\"\",\n      \"shown\"               : true,\n      fields                : {},\n      errors                : {},\n      \"tableHeading\"        : {\n        sector              : \"Name of Sector\",\n        activityName        : \"Name of Activity\",\n        subActivityName     : \"Name of Sub-Activity\",\n        unit                : \"Unit\",\n        familyUpgradation   : \"Family Upgradation\",\n        actions             : 'Action',\n      },\n      \"tableObjects\"        : {\n        deleteMethod        : 'patch',\n        apiLink             : '/api/sectors/subactivity/delete/',\n        paginationApply     : true,\n        searchApply         : true,\n        editUrl             : '/sector-and-activity/'\n      },\n      \"startRange\"          : 0,\n      \"limitRange\"          : 10,\n      \"editId\"              : props.match.params ? props.match.params.subactivityId : '',\n      \"editSectorId\"        : props.match.params ? props.match.params.sectorId : '',\n    }\n  }\n\n  handleChange(event){\n    event.preventDefault();\n    this.setState({\n      \"sector\"               :this.refs.sector.value,\n      \"activityName\"         :this.refs.activityName.value,\n      \"subActivityName\"      :this.refs.subActivityName.value,\n      \"unit\"                 :this.refs.unit.value,\n    });\n    let fields = this.state.fields;\n    fields[event.target.name] = event.target.value;\n    this.setState({\n      fields\n    });\n    if (this.validateForm()) {\n      let errors = {};\n      errors[event.target.name] = \"\";\n      this.setState({\n        errors: errors\n      });\n    }\n  }\n  isTextKey(evt){\n    var charCode = (evt.which) ? evt.which : evt.keyCode\n    if (charCode!=189 && charCode > 32 && (charCode < 65 || charCode > 90) )\n    {\n    evt.preventDefault();\n      return false;\n    }\n    else{\n      return true;\n    }\n  }\n  isNumberKey(evt){\n    var charCode = (evt.which) ? evt.which : evt.keyCode\n    if (charCode > 31 && (charCode < 48 || charCode > 57)  && (charCode < 96 || charCode > 105))\n    {\n    evt.preventDefault();\n      return false;\n    }\n    else{\n      return true;\n    }\n  }\n  submitSubActivity(event){\n    event.preventDefault();\n    if (this.validateFormReq() && this.validateForm()) {\n    var subActivityValues = {\n      \"sector_ID\"            :this.refs.sector.value.split('|')[1],\n      \"sector\"               :this.refs.sector.value.split('|')[0],\n      \"activity_ID\"          :this.refs.activityName.value.split('|')[1],\n      \"activityName\"         :this.refs.activityName.value.split('|')[0],\n      \"subActivityName\"      :this.refs.subActivityName.value,\n      \"unit\"                 :this.state.unit,\n      \"familyUpgradation\"    :this.state.familyUpgradation,\n      \"user_ID\"              :this.state.user_ID,\n    };\n    let fields                = {};\n    fields[\"sector\"]          = \"\";\n    fields[\"activityName\"]    = \"\";\n    fields[\"subActivityName\"] = \"\";\n    fields[\"unit\"]            = \"\";\n    this.setState({\n      \"sector\"                :\"\",\n      \"activityName\"          :\"\",\n      \"subActivityName\"       :\"\",      \n      \"unit\"                  :\"\",\n      \"availableActivity\"     :[],\n      fields                  :fields\n    });\n    axios.patch('/api/sectors/subactivity',subActivityValues)\n      .then((response)=>{\n        this.getData(this.state.startRange, this.state.limitRange);\n        swal({\n          title : response.data.message,\n          text  : response.data.message\n        });\n      })\n      .catch(function(error){\n        console.log(\"error = \",error);\n      });\n    }   \n  }\n  updateSubActivity(event){\n    event.preventDefault();\n    if(this.refs.sector.value ==\"\" || this.refs.activityName.value==\"\" || this.refs.subActivityName.value ==\"\" || this.state.unit ==\"\")\n    {\n      if (this.validateFormReq() && this.validateForm()) {}\n    }else{\n    var subActivityValues = {\n      \"sector_ID\"            : this.refs.sector.value.split('|')[1],\n      \"sector\"               : this.refs.sector.value.split('|')[0],\n      \"activity_ID\"          : this.refs.activityName.value.split('|')[1],\n      \"activityName\"         : this.refs.activityName.value.split('|')[0],\n      \"subactivity_ID\"       : this.state.editId,\n      \"subActivityName\"      : this.refs.subActivityName.value.split('|')[0],\n      \"unit\"                 : this.state.unit,\n      \"familyUpgradation\"    : this.state.familyUpgradation,\n      \"user_ID\"              : this.state.user_ID,\n    };\n\n    let fields                = {};\n    fields[\"sector\"]          = \"\";\n    fields[\"activityName\"]    = \"\";\n    fields[\"subActivityName\"] = \"\";\n    fields[\"unit\"]            = \"\";\n    this.setState({\n      \"sector\"                :\"\",\n      \"activityName\"          :\"\",\n      \"subActivityName\"       :\"\",      \n      \"unit\"                  :\"\",\n      \"availableActivity\"     :[],\n      fields                  :fields\n    });\n    axios.patch('/api/sectors/subactivity/update',subActivityValues)\n        .then((response)=>{\n          this.getData(this.state.startRange, this.state.limitRange);\n          swal({\n            title : response.data.message,\n            text  : response.data.message\n          });\n          this.setState({\n            editId : ''\n          })\n          this.props.history.push('/sector-and-activity');\n        })\n        .catch(function(error){\n          console.log(\"error = \",error);\n        });\n    }     \n  }\n  validateFormReq() {\n    let fields = this.state.fields;\n    let errors = {};\n    let formIsValid = true;\n    $(\"html,body\").scrollTop(0);\n      if (!fields[\"sector\"]) {\n        formIsValid = false;\n        errors[\"sector\"] = \"This field is required.\";\n      }     \n      if (!fields[\"activityName\"]) {\n        formIsValid = false;\n        errors[\"activityName\"] = \"This field is required.\";\n      }\n      if (!fields[\"subActivityName\"]) {\n        formIsValid = false;\n        errors[\"subActivityName\"] = \"This field is required.\";\n      }\n      if (!fields[\"unit\"]) {\n        formIsValid = false;\n        errors[\"unit\"] = \"This field is required.\";\n      }\n      this.setState({\n        errors: errors\n      });\n      return formIsValid;\n  }\n  validateForm() {\n    let fields = this.state.fields;\n    let errors = {};\n    let formIsValid = true;\n    $(\"html,body\").scrollTop(0);\n      if (typeof fields[\"unit\"] !== \"undefined\") {\n        // if (!fields[\"beneficiaryID\"].match(/^(?!\\s*$)[-a-zA-Z0-9_:,.' ']{1,100}$/)) {\n        if (!fields[\"unit\"].match(/^[_A-z]*((-|\\s)*[_A-z])*$|^$/)) {\n          formIsValid = false;\n          errors[\"unit\"] = \"Please enter valid Center Name.\";\n        }\n      }\n      if (typeof fields[\"subActivityName\"] !== \"undefined\") {\n        // if (!fields[\"beneficiaryID\"].match(/^(?!\\s*$)[-a-zA-Z0-9_:,.' ']{1,100}$/)) {\n        if (!fields[\"subActivityName\"].match(/^[_A-z]*((-|\\s)*[_A-z])*$|^$/)) {\n          formIsValid = false;\n          errors[\"subActivityName\"] = \"Please enter valid Center Name.\";\n        }\n      }\n      this.setState({\n        errors: errors\n      });\n      return formIsValid;\n  }\n  componentWillReceiveProps(nextProps){\n    this.getAvailableSectors();\n    var editId = nextProps.match.params.subactivityId;\n\n    if(nextProps.match.params.subactivityId){\n      this.setState({\n        editId : editId,\n        editSectorId : nextProps.match.params.sectorId\n      },()=>{\n        this.getAvailableActivity(this.state.editSectorId);\n        this.edit(this.state.editSectorId);\n      })    \n    }\n    if(nextProps){\n      this.getLength();\n    }\n  }\n\n  componentDidMount() {\n    this.getAvailableSectors();\n    if(this.state.editId){      \n      this.getAvailableActivity(this.state.editSectorId);\n      this.edit(this.state.editId);\n    }\n    this.getLength();\n    this.getData(this.state.startRange, this.state.limitRange);\n  }\n  getAvailableSectors(){\n    axios({\n      method: 'get',\n      url: '/api/sectors/list',\n    }).then((response)=> {\n        \n        this.setState({\n          availableSectors : response.data\n        })\n    }).catch(function (error) {\n      console.log('error', error);\n    });\n  }\n  selectSector(event){\n    event.preventDefault();\n    this.setState({[event.target.name]:event.target.value});\n    var sector_id = event.target.value.split('|')[1];\n    this.handleChange(event);\n    this.getAvailableActivity(sector_id);\n  }\n  getAvailableActivity(sector_id){\n    axios({\n      method: 'get',\n      url: '/api/sectors/'+sector_id,\n    }).then((response)=> {\n\n        this.setState({\n          availableActivity : response.data[0].activity\n        },()=>{})\n    }).catch(function (error) {\n      console.log('error', error);\n    });\n  }\n  edit(id){\n    var activity_id = this.props.match.params.activityId;\n    var subactivity_id = this.props.match.params.subactivityId;\n      axios({\n        method: 'get',\n        url: '/api/sectors/'+id,\n      }).then((response)=> {\n        var editData = response.data[0];\n        this.setState({\n          \"sector\"                : editData.sector+'|'+editData._id,\n          \"activityName\"          : ((editData.activity.filter((a)=>{return a._id == activity_id ? a.activityName : ''}))[0]).activityName+'|'+activity_id,\n          \"subActivityName\"       : (_.flatten(editData.activity.map((a)=>{if(a._id == activity_id) return (a.subActivity).filter((b)=>{ if(b._id == subactivity_id) return b.subActivityName }) })))[0].subActivityName,\n          \"unit\"                  : (_.flatten(editData.activity.map((a, i)=>{if(a._id == activity_id) return (a.subActivity).filter((b)=>{ if(b._id == subactivity_id) return b.unit }) })))[0].unit,\n          \"familyUpgradation\"     : (_.flatten(editData.activity.map((a, i)=>{if(a._id == activity_id)  return (a.subActivity).filter((b)=>{if(b._id == subactivity_id) return b.familyUpgradation}) })))[0].familyUpgradation,\n        },()=>{\n        });\n      }).catch(function (error) {\n    });\n  }\n\n  getLength(){\n    axios.get('/api/sectors/count')\n    .then((response)=>{\n      // console.log('response', response.data);\n      this.setState({\n        dataCount : response.data.dataLength\n      },()=>{\n        console.log('dataCount', this.state.dataCount);\n      })\n    })\n    .catch(function(error){\n      \n    });\n  }\n    \n  getData(startRange, limitRange){\n      var data = {\n      startRange : startRange,\n      limitRange : limitRange\n    }\n    axios.post('/api/sectors/subactivity/list', data)\n    .then((response)=>{\n      this.setState({\n        tableData : response.data\n      });\n    })\n    .catch(function(error){\n      console.log(\"error = \",error);\n    });\n  }\n  \n  getSearchText(searchText, startRange, limitRange){\n      this.setState({\n          tableData : []\n      });\n  }\n  getToggleValue(event){\n    if(this.state.familyUpgradation === \"No\"){\n      this.setState({\n        familyUpgradation : \"Yes\",\n      })\n    }else if(this.state.familyUpgradation === \"Yes\"){\n      this.setState({\n        familyUpgradation : \"No\",\n      })\n    }\n\n  }\n  componentWillUnmount(){\n    this.setState({\n      \"sector\"              :\"\",\n      \"activityName\"        :\"\",\n      \"subActivityName\"     :\"\",\n      \"unit\"                : 0, \n      \"familyUpgradation\"   :\"No\",\n      \"editId\" : \"\"\n    })\n  }\n  render() {\n    return (\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className=\"formWrapper\">\n              <form className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 formLable mt\" id=\"subActivityb\">\n                <div className=\"col-lg-6 col-md-6 col-sm-12 col-xs-12 addLoc \">\n                  <span className=\"perinfotitle mgtpprsnalinfo\"><i className=\"fa fa-map-marker\" aria-hidden=\"true\"></i>&nbsp;&nbsp;&nbsp;Add Sub-Activity</span>\n                </div>\n                <div className=\"marginBottom col-lg-12 col-md-12 col-sm-12 col-xs-12\"></div>\n                <div className=\"row\">\n                  <div className=\" col-lg-12 col-sm-12 col-xs-12 formLable valid_box \">\n                    <div className=\" col-lg-4 col-md-4 col-sm-6 col-xs-12 \">\n                      <label className=\"formLable\">Select Sector Name</label><span className=\"asterix\">*</span>\n                      <div className=\"col-lg-12 col-sm-12 col-xs-12 input-group inputBox-main\" id=\"sector\" >\n                        <select className=\"custom-select form-control inputBox\" ref=\"sector\" name=\"sector\" value={this.state.sector} disabled={this.state.editId?true:false} onChange={this.selectSector.bind(this)}>\n                          <option  className=\"hidden\" >--Select Sector--</option>\n                          {\n                          this.state.availableSectors && this.state.availableSectors.length >0 ?\n                          this.state.availableSectors.map((data, index)=>{\n                            return(\n                              <option key={data._id} value={data.sector+'|'+data._id}>{data.sector}</option>\n                            );\n                          })\n                          :\n                          null\n                        }\n                        </select>\n                      </div>\n                      <div className=\"errorMsg\">{this.state.errors.sector}</div>\n                    </div>\n                    <div className=\" col-lg-4 col-md-4 col-sm-6 col-xs-12 \">\n                      <label className=\"formLable\">Select Activity Name</label><span className=\"asterix\">*</span>\n                      <div className=\"col-lg-12 col-sm-12 col-xs-12 input-group inputBox-main\" id=\"activityName\" >\n                        <select className=\"custom-select form-control inputBox\" ref=\"activityName\" name=\"activityName\" value={this.state.activityName} disabled={this.state.editId?true:false} onChange={this.handleChange.bind(this)} >\n                          <option  className=\"hidden\" >-- Select Activity--</option>\n                          {\n                          this.state.availableActivity && this.state.availableActivity.length >0 ?\n                          this.state.availableActivity.map((data, index)=>{\n                            if(data.activityName ){\n                              return(\n                                <option key={data._id} value={data.activityName+'|'+data._id}>{data.activityName}</option>\n                              );\n                            }\n                          })\n                          :\n                          null\n                        }\n                        </select>\n                      </div>\n                      <div className=\"errorMsg\">{this.state.errors.activityName}</div>\n                    </div>\n\n                    <div className=\" col-md-4 col-sm-6 col-xs-12 \">\n                      <label className=\"formLable\">Name of Sub-Activity</label><span className=\"asterix\">*</span>\n                      <div className=\"col-lg-12 col-sm-12 col-xs-12 input-group inputBox-main \" id=\"subActivityName\" >\n                        {/*<div className=\"input-group-addon inputIcon\">\n                          <i className=\"fa fa-graduation-cap fa\"></i>\n                        </div>*/}\n                        <input type=\"text\" className=\"form-control inputBox \" ref=\"subActivityName\" name=\"subActivityName\" value={this.state.subActivityName} onKeyDown={this.isTextKey.bind(this)} onChange={this.handleChange.bind(this)} />\n                      </div>\n                      <div className=\"errorMsg\">{this.state.errors.subActivityName}</div>\n                    </div>\n                    <div className=\" col-md-12 col-sm-6 col-xs-12 \">\n                     \n                    </div>\n                  </div> \n                  <div className=\" col-lg-12 col-sm-12 col-xs-12 formLable valid_box \">\n                     <div className=\" col-md-4 col-sm-6 col-xs-12 \">\n                      <label className=\"formLable\">Unit</label><span className=\"asterix\">*</span>\n                      <div className=\"col-lg-12 col-sm-12 col-xs-12 input-group inputBox-main \" id=\"unit\" >\n                        <input type=\"text\" className=\"form-control inputBox \" ref=\"unit\" name=\"unit\" value={this.state.unit} onKeyDown={this.isTextKey.bind(this)} onChange={this.handleChange.bind(this)} />\n                      </div>\n                      <div className=\"errorMsg\">{this.state.errors.unit}</div>\n                    </div>\n                    <div className=\" col-lg-4 col-md-4 col-sm-6 col-xs-12 \" >\n                      <label className=\"formLable\">Family Upgradation</label><span className=\"asterix\">*</span>\n                       <div className=\"can-toggle genderbtn demo-rebrand-2 \" onChange={this.getToggleValue.bind(this)}>\n                          <input id=\"d\" type=\"checkbox\"/>\n                          <label className=\"formLable\" htmlFor=\"d\">\n                          <div className=\"can-toggle__switch\" data-checked=\"Yes\"  data-unchecked=\"No\" ></div>\n                            <div className=\"can-toggle__label-text\"></div>\n                          </label>\n                        </div>\n                    </div>\n                  </div> \n                </div><br/>\n                <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 \">\n                  {\n                    this.state.editId ? \n                    <button className=\" col-lg-2 btn submit pull-right\" onClick={this.updateSubActivity.bind(this)}> Update </button>\n                    :\n                    <button className=\" col-lg-2 btn submit pull-right\" onClick={this.submitSubActivity.bind(this)}> Submit </button>\n                  }\n                </div> \n              </form>             \n              <div className=\"col-lg-12 mt\">\n                 <hr className=\"\"/>\n              </div>\n              <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 mt\">\n                <IAssureTable \n                  tableHeading={this.state.tableHeading}\n                  twoLevelHeader={this.state.twoLevelHeader} \n                  dataCount={this.state.dataCount}\n                  tableData={this.state.tableData}\n                  getData={this.getData.bind(this)}\n                  tableObjects={this.state.tableObjects}\n                  getSearchText={this.getSearchText.bind(this)}\n                />\n              </div>              \n            </div>\n          </div>\n      </div>\n    );\n\n  }\n\n}\nexport default withRouter(SubActivity);"]},"metadata":{},"sourceType":"module"}