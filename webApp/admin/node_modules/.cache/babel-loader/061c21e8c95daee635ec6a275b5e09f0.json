{"ast":null,"code":"var _jsxFileName = \"/home/user/REACT PROJECTS/LFMIS/LupinMIS/webApp/admin/src/coreAdmin/accessManagement/AssignPermissionToModules.js\";\nimport React, { Component } from 'react'; // import { BrowserRouter as Router, Route, Switch} from 'react-router-dom';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport axios from 'axios';\nimport $ from 'jquery';\nimport './AccessManagement.css';\n\nclass AssignPermissionToModules extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      roleType: '',\n      roleName: '',\n      facilityPermission: 'waitingforResult',\n      defaultRoles: [],\n      AMData: [],\n      allRoles: [],\n      'subscription': {// allPermission : Meteor.subscribe('allAccessPermission'),\n      }\n    };\n    this.handleChange = this.handleChange.bind(this); // console.log(\"1 =\",this.state.allRoles)\t\n  }\n\n  componentWillMount() {\n    /* Meteor.call(\"isAuthenticated\",\"AccessManagement\",\"AssignPermissions\",(err,res)=>{\n    if(err){\n    console.log(err);\n    }else{\n    if(res==true){\n            this.setState({\n               facilityPermission : res,\n            });\n          }else if(res==false){\n            this.setState({\n               facilityPermission : res,\n            });\n          }\n    }\n    });*/\n  }\n\n  componentDidMount() {\n    /*if ( !$('body').hasClass('adminLte')) {\n      var adminLte = document.createElement(\"script\");\n      adminLte.type=\"text/javascript\";\n      adminLte.src = \"/js/adminLte.js\";\n      $(\"body\").append(adminLte);\n    }*/\n    axios.get('https://jsonplaceholder.typicode.com/todos/1').then(response => {\n      console.log(\"-------examMaster------>>\", response.data);\n      this.setState({\n        AMData: response.data,\n        defaultRoles: response.data,\n        allRoles: response.data\n      }); // localStorage.setItem(\"token\",response.data.token);\n      // direct.setState({loggedIn:response.data.token})\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  componentWillUnmount() {\n    $(\"script[src='/js/adminLte.js']\").remove();\n    $(\"link[href='/css/dashboard.css']\").remove();\n  }\n\n  handleChange(event) {\n    var target = event.target;\n    var name = target.name;\n    this.setState({\n      [name]: event.target.value\n    });\n  }\n\n  getRole(event) {\n    var roleName = this.refs.roleName.value; // console.log(\"role name\",roleName);\n\n    this.setState({\n      roleName: roleName\n    }); // FlowRouter.go('/admin/AssignPermissionstoModules/'+roleName);\n  }\n\n  componentDidUpdate() {\n    /*var accessPermissions = AccessPermissionManagement.find({}).fetch();\n    if(accessPermissions){\n    accessPermissions.map((allAcceessPermission,index)=>{\n    allAcceessPermission.moduleFacilityPermission.map((moduleFacilities, facIndex)=>{\n    \t\tif(moduleFacilities.rolepermissionId!='')\n    \t\t$('.'+moduleFacilities.rolepermissionId).attr('checked',true);\n    \t\n    });\n    });\n    }*/\n  }\n\n  showwhenClick() {// \tvar accessPermissions = AccessPermissionManagement.find({}).fetch();\n    // if(accessPermissions){\n    // \taccessPermissions.map((allAcceessPermission,index)=>{\n    // \t\tallAcceessPermission.moduleFacilityPermission.map((moduleFacilities, facIndex)=>{\n    // \t\t\tif(moduleFacilities.rolepermissionId!=''){\n    // \t\t\t\t$('.'+moduleFacilities.rolepermissionId).attr('checked',true);\n    // \t\t\t}\n    // \t\t});\n    // \t});\n    // }\n  }\n\n  getAMcheckboxId(event) {\n    /*var uniqVal  = event.target.getAttribute('class');\n    var facilityName = event.target.getAttribute('id');\n    var moduleId     = event.target.getAttribute('data-id'); \n    Meteor.call(\"addRolesAccessPermission\",moduleId,facilityName,uniqVal,(err,res)=>{\n    \tif(err){\n    \t\tconsole.log(err);\n    \t}else{\n    \tthis.showwhenClick();\n    \tlocation.reload();\n    \t\t}\n    });\n    */\n  }\n\n  addRemoveAccessPermission(event) {\n    /*var uniqVal = $(event.target).attr('class');\n    var sameId = $(event.target).attr('data-Idval');\n    var idArrayIndex = sameId.split('-');\n    var id = idArrayIndex[0];\n    var facilityIndex = idArrayIndex[1];\n    var facilityName = $(event.target).attr('id');\n    var roleName = $(event.target).attr('name');\n    \tMeteor.call(\"addRemoveRolePermission\",id,facilityName,roleName,facilityIndex,uniqVal);\n    */\n  }\n\n  render() {\n    /*if(this.state.facilityPermission != 'waitingforResult' && this.state.facilityPermission == true){\n    \t$('.sidebar').css({display:'block',background: '#222d32'});*/\n    return React.createElement(\"div\", {\n      className: \"container-fluid \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"formWrapper fontF\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-12 pageContent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-6 col-md-7 col-sm-12 col-xs-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"pageHeader\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \" Access Management \")), React.createElement(\"hr\", {\n      className: \"container-fluid row hr-head\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col-lg-6 col-md-7 col-sm-12 col-xs-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"pageSubHeader\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, \"Assign Permissions to Modules & Facilities\")), React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-5 col-lg-offset-7 col-md-5 col-md-offset-7 col-sm-5 col-sm-offset-7 col-xs-12 rolesList-AM\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      type: \"text\",\n      name: \"roleName\",\n      ref: \"roleName\"\n      /*onChange={this.getRole.bind(this)}*/\n      ,\n      className: \"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12 inputBox-main\",\n      title: \"Select Role\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, \"-- Select Role --\"))), React.createElement(\"div\", {\n      className: \" col-lg-12 col-md-12 col-sm-12 col-xs-12 categoryTable AMFTable\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"table table-striped formTable table-responsive  table-hover\",\n      id: \"AM-Table\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      className: \" tableHeader-AM\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      className: \"col-lg-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, \"Sr.No\"), React.createElement(\"th\", {\n      className: \"col-lg-4 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, \" List of Modules & Facilities \"), React.createElement(\"th\", {\n      className: \"col-lg-1\"\n      /* key={index}*/\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      className: \"srNoAMTable\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }), React.createElement(\"td\", {\n      className: \"AMTableTd\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"nestedTable nestedTable-AMTable\"\n      /* key={indexx}*/\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      className: \"col-lg-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }))))), React.createElement(\"td\", {\n      className: \"srNoAMTable\"\n      /*key={index}*/\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"checkbox\",\n      className: \"hiddenCheckbox-AM\",\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }), React.createElement(\"table\", {\n      className: \"nestedTable nestedTable-AMTable\"\n      /*key={indexx}*/\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      className: \"checkbox AMCheckbox checkbox-success\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"checkboxAccessContainer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"checkbox\",\n      className: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"checkboxMark \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    })), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }))))))))))))))))));\n    /*}else if (this.state.facilityPermission == false ){\n    \t  \tFlowRouter.go('/noAccesss')\n      }else if(this.state.facilityPermission == \"waitingforResult\"){\n      \treturn(<div className=\"col-lg-12 col-md-12 col-sm-12 waitingResLoadingWrap\">\n    \t   <img className=\"loaderImageSize1\" src=\"/images/loading1.gif\" alt=\"loading\"/>\n    \t</div>);\n      }else{ \n      return (<div className=\"col-lg-12 col-md-12 col-sm-12 waitingResLoadingWrap\">\n      \t\t\t<h3>You dont have access. Please <a href=\"/admin/AssignPermissionstoModules/Show%20All\">click here </a>to assign permission</h3>\n      \t\t </div>\n      \t);\n    }*/\n  }\n\n}\n\nexport default AssignPermissionToModules;","map":{"version":3,"sources":["/home/user/REACT PROJECTS/LFMIS/LupinMIS/webApp/admin/src/coreAdmin/accessManagement/AssignPermissionToModules.js"],"names":["React","Component","axios","$","AssignPermissionToModules","constructor","props","state","roleType","roleName","facilityPermission","defaultRoles","AMData","allRoles","handleChange","bind","componentWillMount","componentDidMount","get","then","response","console","log","data","setState","catch","error","componentWillUnmount","remove","event","target","name","value","getRole","refs","componentDidUpdate","showwhenClick","getAMcheckboxId","addRemoveAccessPermission","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n// import { BrowserRouter as Router, Route, Switch} from 'react-router-dom';\nimport  'bootstrap/dist/css/bootstrap.min.css';\nimport axios from 'axios';\nimport $ from 'jquery';\n\nimport  './AccessManagement.css';\n\nclass AssignPermissionToModules extends Component {\n  \n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state={\n\t\t\troleType : '',\n\t\t\troleName : '',\n\t\t\tfacilityPermission : 'waitingforResult',\n\t\t\tdefaultRoles:[],\n\t\t\tAMData:[],\n\t\t\tallRoles:[],\n\t\t\t'subscription': {\n\t\t\t\t// allPermission : Meteor.subscribe('allAccessPermission'),\n\t\t\t}\n\n\t\t}\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t\t// console.log(\"1 =\",this.state.allRoles)\t\n\t}\n\n\tcomponentWillMount(){\n  \t\t/* Meteor.call(\"isAuthenticated\",\"AccessManagement\",\"AssignPermissions\",(err,res)=>{\n\t\t\tif(err){\n\t\t\t\tconsole.log(err);\n\t\t\t}else{\n\t\t\t\tif(res==true){\n\t\t          this.setState({\n\t\t             facilityPermission : res,\n\t\t          });\n\t\t        }else if(res==false){\n\t\t          this.setState({\n\t\t             facilityPermission : res,\n\t\t          });\n\t\t        }\n\t\t\t}\n\t\t});*/\n  \t}\n\n\tcomponentDidMount(){\n\t\t/*if ( !$('body').hasClass('adminLte')) {\n\t\t  var adminLte = document.createElement(\"script\");\n\t\t  adminLte.type=\"text/javascript\";\n\t\t  adminLte.src = \"/js/adminLte.js\";\n\t\t  $(\"body\").append(adminLte);\n\t\t}*/\n\t\taxios.get('https://jsonplaceholder.typicode.com/todos/1',)\n            .then((response)=> {\n                console.log(\"-------examMaster------>>\",response.data);\n                this.setState({\n          \tAMData : response.data,\n          \tdefaultRoles : response.data,\n          \tallRoles : response.data\n\n        });\n                // localStorage.setItem(\"token\",response.data.token);\n                // direct.setState({loggedIn:response.data.token})\n            })\n            .catch(function (error) {\n                console.log(error);\n            });\n  \t}\n  \t\n  \tcomponentWillUnmount(){\n    \t$(\"script[src='/js/adminLte.js']\").remove();\n    \t$(\"link[href='/css/dashboard.css']\").remove();\n  \t}\n\n  \thandleChange(event){\n\t\tvar target = event.target;\n\t\tvar name = target.name;\n\t\tthis.setState({\n\t\t\t[name]: event.target.value,\n\t\t});\n\t}\n\n  \tgetRole(event){\n  \t\tvar roleName = this.refs.roleName.value;\n  \t\t// console.log(\"role name\",roleName);\n  \t\tthis.setState({\n  \t\t\troleName : roleName\n  \t\t});\n  \t\t// FlowRouter.go('/admin/AssignPermissionstoModules/'+roleName);\n  \t\t\n  \t\t\n  \t}\n  \tcomponentDidUpdate(){\n  \t\t/*var accessPermissions = AccessPermissionManagement.find({}).fetch();\n\t\tif(accessPermissions){\n\t\t\taccessPermissions.map((allAcceessPermission,index)=>{\n\t\t\t\tallAcceessPermission.moduleFacilityPermission.map((moduleFacilities, facIndex)=>{\n\t\t\t\t\t\tif(moduleFacilities.rolepermissionId!='')\n\t\t\t\t\t\t$('.'+moduleFacilities.rolepermissionId).attr('checked',true);\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t});\n\t\t}*/\n  \t}\n\n  \tshowwhenClick(){\n  \t// \tvar accessPermissions = AccessPermissionManagement.find({}).fetch();\n\t\t\t// if(accessPermissions){\n\t\t\t// \taccessPermissions.map((allAcceessPermission,index)=>{\n\t\t\t// \t\tallAcceessPermission.moduleFacilityPermission.map((moduleFacilities, facIndex)=>{\n\t\t\t// \t\t\tif(moduleFacilities.rolepermissionId!=''){\n\t\t\t// \t\t\t\t$('.'+moduleFacilities.rolepermissionId).attr('checked',true);\n\t\t\t// \t\t\t}\n\t\t\t// \t\t});\n\t\t\t// \t});\n\t\t\t// }\n  \t}\n\n  \tgetAMcheckboxId(event){\n  \t\t/*var uniqVal  = event.target.getAttribute('class');\n  \t\tvar facilityName = event.target.getAttribute('id');\n  \t\tvar moduleId     = event.target.getAttribute('data-id'); \n  \t\tMeteor.call(\"addRolesAccessPermission\",moduleId,facilityName,uniqVal,(err,res)=>{\n  \t\t\tif(err){\n  \t\t\t\tconsole.log(err);\n  \t\t\t}else{\n  \t\t\tthis.showwhenClick();\n  \t\t\tlocation.reload();\n\n  \t\t\t}\n  \t\t});\n  \t\t*/\n  \t}\n\n  \taddRemoveAccessPermission(event){\n  \t\t/*var uniqVal = $(event.target).attr('class');\n  \t\tvar sameId = $(event.target).attr('data-Idval');\n  \t\tvar idArrayIndex = sameId.split('-');\n  \t\tvar id = idArrayIndex[0];\n  \t\tvar facilityIndex = idArrayIndex[1];\n  \t\tvar facilityName = $(event.target).attr('id');\n  \t\tvar roleName = $(event.target).attr('name');\n\n  \t\tMeteor.call(\"addRemoveRolePermission\",id,facilityName,roleName,facilityIndex,uniqVal);\n*/  \t}\n\n\n\trender(){\n\t\t/*if(this.state.facilityPermission != 'waitingforResult' && this.state.facilityPermission == true){\n\t\t\t$('.sidebar').css({display:'block',background: '#222d32'});*/\n\t\treturn(\n\t\t\t<div className = \"container-fluid \">\n          \t\t<div className = \"row \">\n            \t\t<div className= \"formWrapper fontF\">      \n               \t\t\t<div className= \"content\">  \n\t\t\t\t\t\t\t<div className=\"col-lg-12 pageContent\">\n\t\t\t\t\t\t\t\t<div className=\"row\">\n\t\t\t\t\t\t\t\t\t<div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 \">\n\t\t\t\t\t\t\t\t\t\t<div className=\"col-lg-6 col-md-7 col-sm-12 col-xs-12\">\n\t\t\t\t\t\t\t    \t\t\t<h3 className=\"pageHeader\"> Access Management </h3> \n\t\t\t\t\t\t\t    \t\t</div>\n\t\t\t\t\t\t\t\t\t\t<hr className=\"container-fluid row hr-head\"/>\n\t\t\t\t\t\t\t\t\t\t<div className=\"col-lg-6 col-md-7 col-sm-12 col-xs-12\">\n\t\t\t\t\t\t            \t\t<h3 className=\"pageSubHeader\">Assign Permissions to Modules & Facilities</h3>\n\t\t\t\t\t\t\t    \t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"col-lg-5 col-lg-offset-7 col-md-5 col-md-offset-7 col-sm-5 col-sm-offset-7 col-xs-12 rolesList-AM\">\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t<select type=\"text\" name=\"roleName\" ref=\"roleName\" /*onChange={this.getRole.bind(this)}*/ className=\"form-control col-lg-12 col-md-12 col-sm-12 col-xs-12 inputBox-main\" title=\"Select Role\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=''>-- Select Role --</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/*<option>Show All</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.state.allRoles.map((roles,index)=>{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn <option key={index}>{roles.name}</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}*/}\n\t\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\" col-lg-12 col-md-12 col-sm-12 col-xs-12 categoryTable AMFTable\">\n\t\t\t\t\t\t\t              \t\t<table className=\"table table-striped formTable table-responsive  table-hover\" id=\"AM-Table\">\n\t\t\t\t\t\t\t\t\t\t\t\t    <thead className=\" tableHeader-AM\">\n\t\t\t\t\t\t\t\t\t\t\t\t        <tr>\n\t\t\t\t\t\t\t\t\t\t\t\t            <th className=\"col-lg-1\">Sr.No</th>\n\t\t\t\t\t\t\t\t\t\t\t\t            <th className=\"col-lg-4 \"> List of Modules & Facilities </th>\n\t\t\t\t\t\t\t\t\t\t\t\t           {/* {this.state.defaultRoles.map((defaultRole,index)=>{\n\t\t\t\t\t\t\t\t\t\t\t\t            \treturn */}\n\t\t\t\t\t\t\t\t\t\t\t\t            \t <th className=\"col-lg-1\"  /* key={index}*/ >\n\t\t\t\t\t\t\t\t\t\t\t\t            \t {/* {defaultRole.name}*/}\n\t\t\t\t\t\t\t\t\t\t\t\t            \t </th>\n\t\t\t\t\t\t\t\t\t\t\t\t           {/* })} */}\n\t\t\t\t\t\t\t\t\t\t\t\t        </tr>\n\t\t\t\t\t\t\t\t\t\t\t\t    </thead>\n\t\t\t\t\t\t\t\t\t\t\t\t    <tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t    \t{/*{this.state.AMData.map((allAMData ,index)=>{ \n\t\t\t\t\t\t\t\t\t\t\t    \t\treturn  \n\t\t\t\t\t\t\t\t\t\t\t\t    \t*/}\n\t\t\t\t\t\t\t\t\t\t\t    \t\t<tr /* key={index}*/>\n\t\t\t\t\t\t\t\t\t\t\t    \t\t\t\t\t<td className=\"srNoAMTable\">\n\t\t\t\t\t\t\t\t\t\t\t    \t\t\t\t\t{/*\t{index + 1}*/}\n\t\t\t\t\t\t\t\t\t\t\t    \t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t\t<td className=\"AMTableTd\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t\t{/*\t{allAMData.moduleName}*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t\t\t{/*{allAMData.facilities.map((facility, indexx)=>{\n\t\t\t\t\t\t\t\t\t\t\t\t\t    \t\t\t\treturn */ } \n\t\t\t\t\t\t\t\t\t\t\t\t\t    \t\t\t\t\t\t<table className=\"nestedTable nestedTable-AMTable\" /* key={indexx}*/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t    \t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\t<tr /*key={indexx}*/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\t\t<td className=\"col-lg-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\t\t\t {/*{index + 1 }.{indexx}*/ }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\t\t </td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\t\t{/*{facility.facilityName}*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t    \t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t\t\t{/*})}*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t\t{/*{this.state.defaultRoles.map((defaultRole, index)=>{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t\t\treturn*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t\t\t\t<td className=\"srNoAMTable\" /*key={index}*/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t\t\t<input type=\"checkbox\" className=\"hiddenCheckbox-AM\" disabled/>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t\t\t{/*{allAMData.facilities.map((facility, indexx)=>{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t\t\t\t\treturn*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t\t\t\t\t\t<table className=\"nestedTable nestedTable-AMTable\" /*key={indexx}*/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t\t\t\t\t\t\t{/*{index == 0  ?*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\t<tr /* key={indexx}*/ >\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\t\t\t<td className=\"checkbox AMCheckbox checkbox-success\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\t<div className=\"checkboxAccessContainer\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   <input type=\"checkbox\" className=\"\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   <span className=\"checkboxMark \"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t                        \t\t<label></label>\n\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t                    \t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t{/*\t: \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\tindex == 1 ? \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\t<tr key={indexx}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\t\t<div className=\"checkbox AMCheckbox checkbox-success\">\n\t\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t                        \t\t<input type=\"checkbox\" className={allAMData._id+'-'+index+'-'+indexx} data-id={allAMData._id} id={facility.facilityName} onClick={this.getAMcheckboxId.bind(this)}/>\n\t\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t                        \t\t<label></label>\n\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t                    \t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\t<tr key={indexx}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\t\t\t<div className=\"checkbox AMCheckbox checkbox-success\">\n\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t                        \t\t\t<input type=\"checkbox\" className={allAMData._id+'-'+index+'-'+indexx} id={facility.facilityName} name={index + 1} data-Idval={allAMData._id+'-'+indexx} data-Id={allAMData._id+'-'+(index + 1)} onClick={this.addRemoveAccessPermission.bind(this)}/>\n\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t                        \t\t\t<label></label>\n\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t                    \t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\t}*/}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t     \t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t\t{/*\t})}*/}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t    {/*\t\t})}*/}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t    {/*\t})}*/}\n\t\t\t\t\t\t\t\t\t\t\t\t    \t\n\t\t\t\t\t\t\t\t\t\t\t\t    </tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t    </div>\t\n\t\t\t\t\t      \t</div>\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t\t/*}else if (this.state.facilityPermission == false ){\n\t\t\t  \tFlowRouter.go('/noAccesss')\n\t\t  }else if(this.state.facilityPermission == \"waitingforResult\"){\n\t\t  \treturn(<div className=\"col-lg-12 col-md-12 col-sm-12 waitingResLoadingWrap\">\n\t\t\t   <img className=\"loaderImageSize1\" src=\"/images/loading1.gif\" alt=\"loading\"/>\n\t\t\t</div>);\n\t\t  }else{ \n\t\t  return (<div className=\"col-lg-12 col-md-12 col-sm-12 waitingResLoadingWrap\">\n\t\t  \t\t\t<h3>You dont have access. Please <a href=\"/admin/AssignPermissionstoModules/Show%20All\">click here </a>to assign permission</h3>\n\t\t  \t\t </div>\n\t\t  \t);\n\t\t}*/\n\t}\n}\nexport default AssignPermissionToModules;"]},"metadata":{},"sourceType":"module"}