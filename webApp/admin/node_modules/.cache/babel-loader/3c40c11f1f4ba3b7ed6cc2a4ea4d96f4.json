{"ast":null,"code":"var _jsxFileName = \"/home/user/REACT PROJECTS/LFMIS/LupinMIS/webApp/admin/src/coreAdmin/masterData/sectorAndActivity/component/activity/Activity.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport axios from 'axios';\nimport ReactTable from \"react-table\";\nimport swal from 'sweetalert';\nimport { Route, withRouter } from 'react-router-dom';\nimport _ from 'underscore';\nimport IAssureTable from \"../../../../IAssureTable/IAssureTable.jsx\";\nimport \"./Activity.css\";\naxios.defaults.baseURL = 'http://qalmisapi.iassureit.com';\naxios.defaults.headers.post['Content-Type'] = 'application/json';\n\nclass Activity extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      \"sector\": \"\",\n      \"activity\": \"\",\n      \"academicData\": [],\n      \"user_ID\": \"\",\n      \"shown\": true,\n      \"tabtype\": \"location\",\n      \"availableSectors\": [],\n      fields: {},\n      errors: {},\n      \"tableHeading\": {\n        sector: \"Name of Sector\",\n        activityName: \"Name of Activity\",\n        actions: 'Action'\n      },\n      \"tableObjects\": {\n        deleteMethod: 'patch',\n        apiLink: '/api/sectors/activity/delete/',\n        paginationApply: true,\n        searchApply: true,\n        editUrl: '/sector-and-activity/'\n      },\n      \"startRange\": 0,\n      \"limitRange\": 10,\n      \"editId\": props.match.params ? props.match.params.activityId : '',\n      \"editSectorId\": props.match.params ? props.match.params.sectorId : ''\n    };\n  }\n\n  handleChange(event) {\n    event.preventDefault(); // this.setState({\n    //   \"sector\"     : this.refs.sector.value,  \n    //   \"activity\"   : this.refs.activity.value,  \n    // });\n\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n    let fields = this.state.fields;\n    fields[event.target.name] = event.target.value;\n    this.setState({\n      fields\n    });\n\n    if (this.validateForm()) {\n      let errors = {};\n      errors[event.target.name] = \"\";\n      this.setState({\n        errors: errors\n      });\n    }\n  }\n\n  isTextKey(evt) {\n    var charCode = evt.which ? evt.which : evt.keyCode;\n\n    if (charCode != 189 && charCode > 32 && (charCode < 65 || charCode > 90)) {\n      evt.preventDefault();\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  submitActivity(event) {\n    event.preventDefault();\n\n    if (this.validateFormReq() && this.validateForm()) {\n      var activityValues = {\n        \"sector_ID\": this.refs.sector.value.split('|')[1],\n        \"sector\": this.refs.sector.value.split('|')[0],\n        \"activityName\": this.refs.activity.value,\n        \"user_ID\": this.state.user_ID\n      };\n      let fields = {};\n      fields[\"sector\"] = \"\";\n      fields[\"activity\"] = \"\";\n      this.setState({\n        activity: '',\n        sector: ''\n      });\n      axios.patch('/api/sectors/activity', activityValues).then(response => {\n        console.log(this.validateForm());\n        this.getData(this.state.startRange, this.state.limitRange);\n        swal({\n          title: response.data.message,\n          text: response.data.message\n        });\n      }).catch(function (error) {\n        console.log(\"error ============== \", error);\n      });\n    }\n  }\n\n  updateActivity(event) {\n    event.preventDefault();\n\n    if (this.refs.sector.value == \"\" && this.refs.activity.value == \"\") {\n      // console.log('state validation');\n      if (this.validateFormReq() && this.validateForm()) {}\n    } else {\n      var activityValues = {\n        \"sector_ID\": this.refs.sector.value.split('|')[1],\n        \"sector\": this.refs.sector.value.split('|')[0],\n        \"activity_ID\": this.state.editId,\n        \"activityName\": this.refs.activity.value,\n        \"user_ID\": this.state.user_ID\n      };\n      axios.patch('/api/sectors/activity/update', activityValues).then(response => {\n        console.log(\"activityValues\", activityValues);\n        this.getData(this.state.startRange, this.state.limitRange);\n        swal({\n          title: response.data.message,\n          text: response.data.message\n        });\n        this.setState({\n          editId: '',\n          activity: '',\n          sector: ''\n        });\n        this.props.history.push('/sector-and-activity');\n      }).catch(function (error) {// console.log(\"error = \",error);\n      });\n      let fields = {};\n      fields[\"sector\"] = \"\";\n      fields[\"activity\"] = \"\";\n      this.setState({\n        \"sector\": \"\",\n        \"activity\": \"\",\n        fields: fields\n      });\n    }\n  }\n\n  validateFormReq() {\n    let fields = this.state.fields;\n    let errors = {};\n    let formIsValid = true;\n    $(\"html,body\").scrollTop(0);\n\n    if (!fields[\"sector\"]) {\n      formIsValid = false;\n      errors[\"sector\"] = \"This field is required.\";\n    }\n\n    if (!fields[\"activity\"]) {\n      formIsValid = false;\n      errors[\"activity\"] = \"This field is required.\";\n    }\n\n    this.setState({\n      errors: errors\n    });\n    return formIsValid;\n  }\n\n  validateForm() {\n    let fields = this.state.fields;\n    let errors = {};\n    let formIsValid = true;\n    $(\"html,body\").scrollTop(0);\n\n    if (typeof fields[\"activity\"] !== \"undefined\") {\n      // if (!fields[\"beneficiaryID\"].match(/^(?!\\s*$)[-a-zA-Z0-9_:,.' ']{1,100}$/)) {\n      if (!fields[\"activity\"].match(/^[_A-z]*((-|\\s)*[_A-z])*$|^$/)) {\n        formIsValid = false;\n        errors[\"activity\"] = \"Please enter valid Activity Name.\";\n      }\n    }\n\n    this.setState({\n      errors: errors\n    });\n    return formIsValid;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.getAvailableSectors();\n    var editId = nextProps.match.params.activityId;\n\n    if (nextProps.match.params.activityId) {\n      this.setState({\n        editId: editId,\n        editSectorId: nextProps.match.params.sectorId\n      }, () => {\n        this.edit(this.state.editSectorId); // console.log(\"editId\",this.state.editId);    \n      });\n    }\n\n    if (nextProps) {\n      this.getLength();\n    }\n  }\n\n  componentDidMount() {\n    this.getAvailableSectors();\n\n    if (this.state.editId) {\n      this.edit(this.state.editSectorId);\n    }\n\n    this.getLength();\n    this.getData(this.state.startRange, this.state.limitRange);\n  }\n\n  getAvailableSectors() {\n    axios({\n      method: 'get',\n      url: '/api/sectors/list'\n    }).then(response => {\n      this.setState({\n        availableSectors: response.data\n      });\n    }).catch(function (error) {// console.log('error', error);\n    });\n  }\n\n  edit(id) {\n    var activity_id = this.props.match.params.activityId;\n    console.log('activity_id', activity_id);\n    axios({\n      method: 'get',\n      url: '/api/sectors/' + id\n    }).then(response => {\n      var editData = response.data[0];\n      console.log(\"editData\", editData);\n      this.setState({\n        \"sector\": editData.sector + '|' + editData._id,\n        \"activity\": editData.activity.filter(a => {\n          return a._id == activity_id ? a.activityName : '';\n        })[0].activityName // \"activityName\"      :_.first(editData.activity.map((a, i)=>{console.log( a._id +\"==\"+ activity_id)})),\n\n      }, () => {\n        console.log('this.state', this.state.activity);\n      });\n    }).catch(function (error) {});\n  }\n\n  getLength() {\n    axios.get('/api/sectors/count').then(response => {\n      // console.log('response', response.data);\n      this.setState({\n        dataCount: response.data.dataLength\n      }, () => {\n        console.log('dataCount', this.state.dataCount);\n      });\n    }).catch(function (error) {});\n  }\n\n  getData(startRange, limitRange) {\n    var data = {\n      startRange: startRange,\n      limitRange: limitRange\n    };\n    axios.post('/api/sectors/activity/list', data).then(response => {\n      console.log(\"response\", response.data);\n      this.setState({\n        tableData: response.data\n      });\n    }).catch(function (error) {// console.log(\"error = \",error);\n    });\n  }\n\n  getSearchText(searchText, startRange, limitRange) {\n    // console.log(searchText, startRange, limitRange);\n    this.setState({\n      tableData: []\n    });\n  }\n\n  componentWillUnmount() {\n    this.setState({\n      \"sector\": \"\",\n      \"activity\": \"\",\n      \"editId\": \"\"\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"formWrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 formLable mt\",\n      id: \"Activity\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-6 col-md-6 col-sm-12 col-xs-12 addLoc \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"perinfotitle mgtpprsnalinfo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-map-marker\",\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314\n      },\n      __self: this\n    }), \"\\xA0\\xA0\\xA0Add Activity\")), React.createElement(\"div\", {\n      className: \"marginBottom col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \" col-lg-12 col-sm-12 col-xs-12 formLable valid_box \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \" col-lg-6 col-md-4 col-sm-6 col-xs-12 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"formLable\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320\n      },\n      __self: this\n    }, \"Select Sector Name\"), React.createElement(\"span\", {\n      className: \"asterix\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320\n      },\n      __self: this\n    }, \"*\"), React.createElement(\"div\", {\n      className: \"col-lg-12 col-sm-12 col-xs-12 input-group inputBox-main\",\n      id: \"sector\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      className: \"custom-select form-control inputBox\",\n      ref: \"sector\",\n      name: \"sector\",\n      value: this.state.sector,\n      disabled: this.state.editId ? true : false,\n      onChange: this.handleChange.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      className: \"hidden\",\n      value: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323\n      },\n      __self: this\n    }, \"-- Select Sector--\"), this.state.availableSectors && this.state.availableSectors.length > 0 ? this.state.availableSectors.map((data, index) => {\n      return React.createElement(\"option\", {\n        key: data._id,\n        value: data.sector + '|' + data._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328\n        },\n        __self: this\n      }, data.sector);\n    }) : null)), React.createElement(\"div\", {\n      className: \"errorMsg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    }, this.state.errors.sector)), React.createElement(\"div\", {\n      className: \" col-md-6 col-sm-6 col-xs-12 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"formLable\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340\n      },\n      __self: this\n    }, \"Name of Activity\"), React.createElement(\"span\", {\n      className: \"asterix\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340\n      },\n      __self: this\n    }, \"*\"), React.createElement(\"div\", {\n      className: \"col-lg-12 col-sm-12 col-xs-12 input-group inputBox-main \",\n      id: \"activity\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control inputBox \",\n      placeholder: \"\",\n      name: \"activity\",\n      value: this.state.activity,\n      onKeyDown: this.isTextKey.bind(this),\n      onChange: this.handleChange.bind(this),\n      ref: \"activity\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"errorMsg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345\n      },\n      __self: this\n    }, this.state.errors.activity)))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349\n      },\n      __self: this\n    }, this.state.editId ? React.createElement(\"button\", {\n      className: \" col-lg-2 btn submit pull-right\",\n      onClick: this.updateActivity.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    }, \" Update \") : React.createElement(\"button\", {\n      className: \" col-lg-2 btn submit pull-right\",\n      onClick: this.submitActivity.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354\n      },\n      __self: this\n    }, \" Submit \"))), React.createElement(\"div\", {\n      className: \"col-lg-12 mt \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358\n      },\n      __self: this\n    }, React.createElement(\"hr\", {\n      className: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"mt \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362\n      },\n      __self: this\n    }, React.createElement(IAssureTable, {\n      tableHeading: this.state.tableHeading,\n      twoLevelHeader: this.state.twoLevelHeader,\n      dataCount: this.state.dataCount,\n      tableData: this.state.tableData,\n      getData: this.getData.bind(this),\n      tableObjects: this.state.tableObjects,\n      getSearchText: this.getSearchText.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363\n      },\n      __self: this\n    }))))));\n  }\n\n}\n\nexport default withRouter(Activity);","map":{"version":3,"sources":["/home/user/REACT PROJECTS/LFMIS/LupinMIS/webApp/admin/src/coreAdmin/masterData/sectorAndActivity/component/activity/Activity.js"],"names":["React","Component","$","axios","ReactTable","swal","Route","withRouter","_","IAssureTable","defaults","baseURL","headers","post","Activity","constructor","props","state","fields","errors","sector","activityName","actions","deleteMethod","apiLink","paginationApply","searchApply","editUrl","match","params","activityId","sectorId","handleChange","event","preventDefault","setState","target","name","value","validateForm","isTextKey","evt","charCode","which","keyCode","submitActivity","validateFormReq","activityValues","refs","split","activity","user_ID","patch","then","response","console","log","getData","startRange","limitRange","title","data","message","text","catch","error","updateActivity","editId","history","push","formIsValid","scrollTop","componentWillReceiveProps","nextProps","getAvailableSectors","editSectorId","edit","getLength","componentDidMount","method","url","availableSectors","id","activity_id","editData","_id","filter","a","get","dataCount","dataLength","tableData","getSearchText","searchText","componentWillUnmount","render","bind","length","map","index","tableHeading","twoLevelHeader","tableObjects"],"mappings":"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","sourcesContent":["import React, { Component }     from 'react';\nimport $                        from 'jquery';\nimport axios                    from 'axios';\nimport ReactTable               from \"react-table\";\nimport swal                     from 'sweetalert';\nimport {Route, withRouter}      from 'react-router-dom';\nimport _                        from 'underscore';\nimport IAssureTable             from \"../../../../IAssureTable/IAssureTable.jsx\";\nimport \"./Activity.css\";\n\naxios.defaults.baseURL = 'http://qalmisapi.iassureit.com';\naxios.defaults.headers.post['Content-Type'] = 'application/json';\n\nclass Activity extends Component{\n  \n  constructor(props){\n    super(props);\n   \n    this.state = {\n      \"sector\"              :\"\",\n      \"activity\"            :\"\",\n      \"academicData\"        :[],\n      \"user_ID\"             :\"\",\n      \"shown\"               : true,\n      \"tabtype\"             : \"location\",\n      \"availableSectors\"    : [],\n      fields                : {},\n      errors                : {},\n      \"tableHeading\"        : {\n        sector              : \"Name of Sector\",\n        activityName        : \"Name of Activity\",\n        actions             : 'Action',\n      },\n      \"tableObjects\"        : {\n        deleteMethod        : 'patch',\n        apiLink             : '/api/sectors/activity/delete/',\n        paginationApply     : true,\n        searchApply         : true,\n        editUrl             : '/sector-and-activity/'\n      },\n      \"startRange\"          : 0,\n      \"limitRange\"          : 10,\n      \"editId\"              : props.match.params ? props.match.params.activityId : '',\n      \"editSectorId\"        : props.match.params ? props.match.params.sectorId : '',\n    }\n  }\n \n \n  handleChange(event){\n    event.preventDefault();\n    // this.setState({\n    //   \"sector\"     : this.refs.sector.value,  \n    //   \"activity\"   : this.refs.activity.value,  \n    // });\n    this.setState({\n      [event.target.name] : event.target.value\n    });\n    let fields = this.state.fields;\n    fields[event.target.name] = event.target.value;\n    this.setState({\n      fields\n    });\n    if (this.validateForm()) {\n      let errors = {};\n      errors[event.target.name] = \"\";\n      this.setState({\n        errors: errors\n      });\n    }\n  }\n\n  isTextKey(evt){\n   var charCode = (evt.which) ? evt.which : evt.keyCode\n   if (charCode!=189 && charCode > 32 && (charCode < 65 || charCode > 90) )\n   {\n    evt.preventDefault();\n      return false;\n    }\n    else{\n      return true;\n    }\n \n  }\n\n  submitActivity(event){\n    event.preventDefault();\n    if (this.validateFormReq() && this.validateForm()) {\n    var activityValues = {\n      \"sector_ID\"            : this.refs.sector.value.split('|')[1],\n      \"sector\"               : this.refs.sector.value.split('|')[0],\n      \"activityName\"         : this.refs.activity.value,\n      \"user_ID\"              : this.state.user_ID,\n    };\n    let fields            = {};\n    fields[\"sector\"]      = \"\";\n    fields[\"activity\"]    = \"\";\n    this.setState({\n      activity : '',\n      sector   : ''\n    })\n  \n    axios.patch('/api/sectors/activity', activityValues)\n      .then((response)=>{\n       console.log(this.validateForm());\n       this.getData(this.state.startRange, this.state.limitRange);\n        swal({\n          title : response.data.message,\n          text  : response.data.message\n        });\n        \n      })\n      .catch(function(error){\n        console.log(\"error ============== \",error);\n      });\n    }\n  }\n\n  updateActivity(event){\n    event.preventDefault();\n    if(this.refs.sector.value ==\"\" && this.refs.activity.value==\"\" )\n    {\n      // console.log('state validation');\n      if (this.validateFormReq() && this.validateForm()) {\n      }\n    }else{\n      var activityValues = {\n        \"sector_ID\"            : this.refs.sector.value.split('|')[1],\n        \"sector\"               : this.refs.sector.value.split('|')[0],\n        \"activity_ID\"          : this.state.editId,\n        \"activityName\"         : this.refs.activity.value,\n        \"user_ID\"              : this.state.user_ID,\n      };\n      axios.patch('/api/sectors/activity/update',activityValues)\n        .then((response)=>{\n          console.log(\"activityValues\",activityValues);\n          this.getData(this.state.startRange, this.state.limitRange);\n          swal({\n            title : response.data.message,\n            text  : response.data.message\n          });\n          \n          this.setState({\n            editId   : '',\n            activity : '',\n            sector   : ''\n          })\n          this.props.history.push('/sector-and-activity');\n        })\n        .catch(function(error){\n          // console.log(\"error = \",error);\n        });\n      let fields             = {};\n      fields[\"sector\"]       = \"\";\n      fields[\"activity\"]     = \"\";\n    \n      this.setState({\n        \"sector\"        :\"\",\n        \"activity\"      :\"\",\n        fields          :fields\n      });\n    }\n  }\n  validateFormReq() {\n    let fields = this.state.fields;\n    let errors = {};\n    let formIsValid = true;\n    $(\"html,body\").scrollTop(0);\n\n      if (!fields[\"sector\"]) {\n        formIsValid = false;\n        errors[\"sector\"] = \"This field is required.\";\n      }     \n      if (!fields[\"activity\"]) {\n        formIsValid = false;\n        errors[\"activity\"] = \"This field is required.\";\n      }\n      this.setState({\n        errors: errors\n      });\n      return formIsValid;\n  }   \n  \n  validateForm() {\n    let fields = this.state.fields;\n    let errors = {};\n    let formIsValid = true;\n    $(\"html,body\").scrollTop(0);\n\n      if (typeof fields[\"activity\"] !== \"undefined\") {\n        // if (!fields[\"beneficiaryID\"].match(/^(?!\\s*$)[-a-zA-Z0-9_:,.' ']{1,100}$/)) {\n        if (!fields[\"activity\"].match(/^[_A-z]*((-|\\s)*[_A-z])*$|^$/)) {\n          formIsValid = false;\n          errors[\"activity\"] = \"Please enter valid Activity Name.\";\n        }\n      }\n    \n      this.setState({\n        errors: errors\n      });\n      return formIsValid;\n  }\n\n  componentWillReceiveProps(nextProps){\n    this.getAvailableSectors();\n    var editId = nextProps.match.params.activityId;\n    if(nextProps.match.params.activityId){\n      this.setState({\n        editId : editId,\n        editSectorId : nextProps.match.params.sectorId\n      },()=>{\n        this.edit(this.state.editSectorId);\n        // console.log(\"editId\",this.state.editId);    \n      })      \n    }    \n    if(nextProps){\n      this.getLength();\n    }\n  }\n\n  componentDidMount() {\n    this.getAvailableSectors();\n    if(this.state.editId){      \n      this.edit(this.state.editSectorId);\n    }\n    \n    this.getLength();\n    this.getData(this.state.startRange, this.state.limitRange);\n  }\n  getAvailableSectors(){\n    axios({\n      method: 'get',\n      url: '/api/sectors/list',\n    }).then((response)=> {\n        \n        this.setState({\n          availableSectors : response.data\n        })\n    }).catch(function (error) {\n      // console.log('error', error);\n    });\n  }\n  edit(id){\n    var activity_id = this.props.match.params.activityId;\n    console.log('activity_id',activity_id);\n    axios({\n      method: 'get',\n      url: '/api/sectors/'+id,\n    }).then((response)=> {\n      var editData = response.data[0];\n      console.log(\"editData\",editData)\n      this.setState({\n        \"sector\"        : editData.sector+'|'+editData._id,\n        \"activity\"      : ((editData.activity.filter((a)=>{return a._id == activity_id ? a.activityName : ''}))[0]).activityName,\n        // \"activityName\"      :_.first(editData.activity.map((a, i)=>{console.log( a._id +\"==\"+ activity_id)})),\n      },()=>{\n        console.log('this.state', this.state.activity)\n      });\n    }).catch(function (error) {\n    });\n  }\n  \n  getLength(){\n    axios.get('/api/sectors/count')\n    .then((response)=>{\n      // console.log('response', response.data);\n      this.setState({\n        dataCount : response.data.dataLength\n      },()=>{\n        console.log('dataCount', this.state.dataCount);\n      })\n    })\n    .catch(function(error){\n      \n    });\n  }\n  \n  getData(startRange, limitRange){\n    var data = {\n      startRange : startRange,\n      limitRange : limitRange\n    }\n    axios.post('/api/sectors/activity/list', data)\n    .then((response)=>{\n      console.log(\"response\", response.data);\n      this.setState({\n        tableData : response.data\n      });\n    })\n    .catch(function(error){\n      // console.log(\"error = \",error);\n    });\n  }\n  getSearchText(searchText, startRange, limitRange){\n      // console.log(searchText, startRange, limitRange);\n      this.setState({\n          tableData : []\n      });\n  }\n  componentWillUnmount(){\n    this.setState({\n      \"sector\"   :\"\",\n      \"activity\" :\"\",\n      \"editId\"   : \"\"\n    })\n  }\n  render() {\n   \n    return (\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className=\"formWrapper\">\n            <form className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 formLable mt\"  id=\"Activity\">\n              <div className=\"col-lg-6 col-md-6 col-sm-12 col-xs-12 addLoc \">\n                <span className=\"perinfotitle mgtpprsnalinfo\"><i className=\"fa fa-map-marker\" aria-hidden=\"true\"></i>&nbsp;&nbsp;&nbsp;Add Activity</span>\n              </div>\n              <div className=\"marginBottom col-lg-12 col-md-12 col-sm-12 col-xs-12\"></div>\n              <div className=\"row\">\n                <div className=\" col-lg-12 col-sm-12 col-xs-12 formLable valid_box \">\n                  <div className=\" col-lg-6 col-md-4 col-sm-6 col-xs-12 \">\n                    <label className=\"formLable\">Select Sector Name</label><span className=\"asterix\">*</span>\n                    <div className=\"col-lg-12 col-sm-12 col-xs-12 input-group inputBox-main\" id=\"sector\" >\n                      <select className=\"custom-select form-control inputBox\" ref=\"sector\" name=\"sector\" value={this.state.sector} disabled={this.state.editId?true:false} onChange={this.handleChange.bind(this)}>\n                        <option  className=\"hidden\" value=\"\" >-- Select Sector--</option>\n                        {\n                          this.state.availableSectors && this.state.availableSectors.length >0 ?\n                          this.state.availableSectors.map((data, index)=>{\n                            return(\n                              <option key={data._id} value={data.sector+'|'+data._id}>{data.sector}</option>\n                            );\n                          })\n                          :\n                          null\n                        }\n                        \n                      </select>\n                    </div>\n                    <div className=\"errorMsg\">{this.state.errors.sector}</div>\n                  </div>\n                  <div className=\" col-md-6 col-sm-6 col-xs-12 \">\n                    <label className=\"formLable\">Name of Activity</label><span className=\"asterix\">*</span>\n                    <div className=\"col-lg-12 col-sm-12 col-xs-12 input-group inputBox-main \" id=\"activity\" >\n                      \n                      <input type=\"text\" className=\"form-control inputBox \"  placeholder=\"\" name=\"activity\"  value={this.state.activity} onKeyDown={this.isTextKey.bind(this)} onChange={this.handleChange.bind(this)} ref=\"activity\" />\n                    </div>\n                    <div className=\"errorMsg\">{this.state.errors.activity}</div>\n                  </div>\n                </div> \n              </div><br/>\n              <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 \">\n                {\n                  this.state.editId ? \n                  <button className=\" col-lg-2 btn submit pull-right\" onClick={this.updateActivity.bind(this)}> Update </button>\n                  :\n                  <button className=\" col-lg-2 btn submit pull-right\" onClick={this.submitActivity.bind(this)}> Submit </button>\n                }\n              </div> \n            </form>\n            <div className=\"col-lg-12 mt \">\n               <hr className=\"\"/>\n            </div>\n            <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 \">\n              <div className=\"mt \" >  \n                <IAssureTable \n                  tableHeading={this.state.tableHeading}\n                  twoLevelHeader={this.state.twoLevelHeader} \n                  dataCount={this.state.dataCount}\n                  tableData={this.state.tableData}\n                  getData={this.getData.bind(this)}\n                  tableObjects={this.state.tableObjects}\n                  getSearchText={this.getSearchText.bind(this)}\n                />\n              </div> \n            </div>              \n          </div>\n        </div>\n      </div>\n    );\n  }\n}\nexport default withRouter(Activity);"]},"metadata":{},"sourceType":"module"}